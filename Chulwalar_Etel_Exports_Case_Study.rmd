# Doing Data Science: Case Study 2 - Forecasting Chulwalar Total Etel Exports
###Claire Chu & Joseph Stoffa  
###July 19, 2016  

<br>

##Introduction

Chulwalar is part of the island group Urbano in the northern hemisphere. They are famous for their plants which flower in winter. There are three main plants that Chulwalar exports: Efak is a leafy bush with white flowers, Wuge is a grass like plant with tiny pink flowers and Etel is a flowering tree. Etel comes in two varieties: red flowers and blue flowers. Due to the nature of the products, exports generally are higher towards the end of the year. Chulwalar celebrates its independence on the 1st of December each year. On this day it is custom to give presents to family and friends. Chulwalar also celebrates the March Equinox as a time of rebirth in the northern hemisphere. 

The Prime Minister of Chulwalar has asked us to help him in forecasting the exports. In order to do this we have been given as is data and plan data as well as a list of indicators which may affect exports. Our job is to find out the best way to forecast Chulwalar's exports in 2014 based on data collected before this year 
<br>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(fpp)
```
## Background
This case study builds on the data analysis and modeling of plant exports from Chulwalar performed by .


##Table of Contents
####1.0 [Importing Data](#id-section1)
####2.0 [Cleaning Modifying Data](#id-section2)
####3.0 [Exploring Data](#id-section3)
####---3.1 [Preliminary Analysis](#id-section3.1)
####---3.2 [Preliminary Time Series Analysis](#id-section3.2)
####4.0 [Correlation of Different External Indicators](#id-section4)
<br>

****************************
<div id='id-section1'/>
## 1.0  Importing Data

The script _loadData.r_ loads the the data for this case study into dataframes _ImportedAsISData_, _ImportedIndicators_, and _ImportedPlanData_ from the files _ImportedAsIsDataChulwalar.csv_, _ImportedIndicatorshulwalar.csv_, and _ImportedPlanDataChulwalar.csv_ respectively.

```{r pressure, echo=FALSE}
source("Scripts/loadData.r")
```

****************************
<div id='id-section2'/>
## 2.0  Cleaning/Modifying Data
In order to conduct our analysis the data needs to be subsetted into vectors and time series.  For this case study we are only interested in the Total Etel exports.  Data on other individual plants will be ignored.  The script _cleanData.r_ takes the data frames for As Is, Planned, and Indicator data and splits them into vectors which are then converted into time series.  Below are the resultant time series outputted by the script.

``` {r cleaning data}
source("Scripts/cleanData.r")
```

****************************
<div id='id-section3'/>
## 3.0 Exploring Data
<div id='id-section3.1'/>
### 3.1 Preliminary Analysis

For the preliminary Analysis, the time series have been plotted and the correlation between the As Is and Plan data has been tested in order to ascertain how exact the planning is.  These results show a very high planning accuracy and are therefore suitable for modeling. (Wheeler et al.)

``` {r preliminary analysis}
source("Scripts/preliminaryAnalysis.r")
```

![Figure 1](Plots/TotalAsIs_plot1.png)

![Figure 2](Plots/TotalEtelAsIs_plot1.png)

![Figure 3](Plots/TotalPlan_plot1.png)

![Figure 4](Plots/TotalEtelPlan_plot1.png)

<div id='id-section3.2'/>
### 3.2 Preliminary Time Series Analysis

The time series can be analyzed using the _stl_ function in order to seperate the trend, seasonality, and remainder (remaining) coincidental) components from one another.  Thus the individual time series can be shown graphically and tabularly.  The trend of the total exports is almost linear.  A relatively uniform seasonality can be seen in Figure 5. (Wheeler et al).

![Figure 5](Plots/TotalAsIs_stl.png)

```{r Total As Is STL}
print(TotalAsIs_stl)
```

It is interesting to note that the almost linear trend is not seen in the individual segment for Total Etel (Figure 6).  The individual trends for all flower exports run in partially opposite directions in the middle of the time scale, which causes the total As Is data trend to be linear. (Wheeler et al).

![Figure 6](Plots/TotalEtelAsIs_stl.png)

```{r Total Etel As Is STL}
print(TotalEtelAsIs_stl)
```


![Figure 7](Plots/STL_TimeSeries_trend.png)

The modification of the seasonality component can also be changed into a montly view.  It only makes sense to do this if the seasonality component as the trend looks almost identical and the remainder is then randomly spread. (Wheeler et al.)

![Figure 8](Plots/STL_TimeSeries_seasonal.png)

****************************
<div id='id-section4'/>
## 4.0 Correlation of Different External Indicators
